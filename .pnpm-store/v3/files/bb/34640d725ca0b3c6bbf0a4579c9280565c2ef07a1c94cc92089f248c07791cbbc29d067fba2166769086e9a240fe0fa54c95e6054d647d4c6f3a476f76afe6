/*!
 * Portions of this file are based on code from radix-ui.
 * MIT Licensed, Copyright (c) 2022 WorkOS.
 *
 * Credits to the radix-ui team:
 * https://github.com/radix-ui/primitives/blob/02b036d4181131dfc0224044ba5f17d260bce2f8/packages/react/toggle/src/Toggle.tsx
 *
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/a13802d8be6f83af1450e56f7a88527b10d9cadf/packages/@react-aria/button/src/useToggleButton.ts
 */
import { createPolymorphicComponent, isFunction } from "@kobalte/utils";
import { children, splitProps } from "solid-js";
import * as Button from "../button";
import { createToggleState } from "../primitives";
/**
 * A two-state button that allow users to toggle a selection on or off.
 * This component is based on the [WAI-ARIA Button Pattern](https://www.w3.org/WAI/ARIA/apg/patterns/button/)
 */
export const ToggleButtonRoot = createPolymorphicComponent(props => {
    const [local, others] = splitProps(props, [
        "children",
        "isPressed",
        "defaultIsPressed",
        "onPressedChange",
        "onPress",
    ]);
    const state = createToggleState({
        isSelected: () => local.isPressed,
        defaultIsSelected: () => local.defaultIsPressed,
        onSelectedChange: selected => local.onPressedChange?.(selected),
        isDisabled: () => others.isDisabled,
    });
    const onPress = e => {
        local.onPress?.(e);
        state.toggle();
    };
    return (<Button.Root aria-pressed={state.isSelected()} data-pressed={state.isSelected() ? "" : undefined} onPress={onPress} {...others}>
        <ToggleButtonRootChild state={{ isPressed: state.isSelected }} children={local.children}/>
      </Button.Root>);
});
function ToggleButtonRootChild(props) {
    return children(() => {
        const body = props.children;
        return isFunction(body) ? body(props.state) : body;
    });
}
