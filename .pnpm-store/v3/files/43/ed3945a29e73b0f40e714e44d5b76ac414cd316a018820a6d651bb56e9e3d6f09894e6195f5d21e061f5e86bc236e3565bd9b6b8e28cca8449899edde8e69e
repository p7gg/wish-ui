{"version":3,"file":"index.js","sources":["../../src/array.ts","../../src/assertion.ts","../../src/create-generate-id.ts","../../src/create-global-listeners.ts","../../src/dom.ts","../../src/enums.ts","../../src/platform.ts","../../src/events.ts","../../src/focus-without-scrolling.ts","../../src/get-scroll-parent.ts","../../src/is-virtual-event.ts","../../src/noop.ts","../../src/number.ts","../../src/polygon.ts","../../src/polymorphic.tsx","../../src/props.ts","../../src/run-after-transition.ts","../../src/scroll-into-view.ts","../../src/styles.ts","../../src/tabbable.ts"],"sourcesContent":["/*!\n * Portions of this file are based on code from ariakit.\n * MIT Licensed, Copyright (c) Diego Haz.\n *\n * Credits to the Ariakit team:\n * https://github.com/ariakit/ariakit/blob/da142672eddefa99365773ced72171facc06fdcb/packages/ariakit-utils/src/array.ts\n */\n\n/**\n * Immutably adds an item at the given index to an array.\n */\nexport function addItemToArray<T extends any[]>(array: T, item: T[number], index = -1) {\n  if (!(index in array)) {\n    return [...array, item] as T;\n  }\n  return [...array.slice(0, index), item, ...array.slice(index)] as T;\n}\n\n/**\n * Immutably removes an item from an array.\n */\nexport function removeItemFromArray<T>(array: T[], item: T) {\n  const updatedArray = [...array];\n  const index = updatedArray.indexOf(item);\n\n  if (index !== -1) {\n    updatedArray.splice(index, 1);\n  }\n\n  return updatedArray;\n}\n","/*!\n * Original code by Chakra UI\n * MIT Licensed, Copyright (c) 2019 Segun Adebayo.\n *\n * Credits to the Chakra UI team:\n * https://github.com/chakra-ui/chakra-ui/blob/main/packages/utils/src/assertion.ts\n */\n\n// Array assertions\nexport function isArray<T>(value: any): value is Array<T> {\n  return Array.isArray(value);\n}\n\n// String assertions\nexport function isString(value: any): value is string {\n  return Object.prototype.toString.call(value) === \"[object String]\";\n}\n\n// Function assertions\nexport function isFunction<T extends Function = Function>(value: any): value is T {\n  return typeof value === \"function\";\n}\n","import { Accessor } from \"solid-js\";\n\n/**\n * Create a function that generate an id from a `baseId` and `suffix`.\n */\nexport function createGenerateId(baseId: Accessor<string>) {\n  return (suffix: string) => `${baseId()}-${suffix}`;\n}\n","/*!\n * Portions of this file are based on code from react-spectrum.\n * Apache License Version 2.0, Copyright 2020 Adobe.\n *\n * Credits to the React Spectrum team:\n * https://github.com/solidjs-community/solid-aria/blob/2c5f54feb5cfea514b1ee0a52d0416878f882351/packages/utils/src/createGlobalListeners.ts\n */\n\nimport { onCleanup } from \"solid-js\";\n\ninterface GlobalListeners {\n  addGlobalListener<K extends keyof DocumentEventMap>(\n    el: EventTarget,\n    type: K,\n    listener: (this: Document, ev: DocumentEventMap[K]) => any,\n    options?: boolean | AddEventListenerOptions\n  ): void;\n\n  addGlobalListener(\n    el: EventTarget,\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ): void;\n\n  removeGlobalListener<K extends keyof DocumentEventMap>(\n    el: EventTarget,\n    type: K,\n    listener: (this: Document, ev: DocumentEventMap[K]) => any,\n    options?: boolean | EventListenerOptions\n  ): void;\n\n  removeGlobalListener(\n    el: EventTarget,\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | EventListenerOptions\n  ): void;\n\n  removeAllGlobalListeners(): void;\n}\n\nexport function createGlobalListeners(): GlobalListeners {\n  const globalListeners = new Map();\n\n  const addGlobalListener = (eventTarget: any, type: any, listener: any, options: any) => {\n    // Make sure we remove the listener after it is called with the `once` option.\n    const fn = options?.once\n      ? (...args: any) => {\n          globalListeners.delete(listener);\n          listener(...args);\n        }\n      : listener;\n    globalListeners.set(listener, { type, eventTarget, fn, options });\n    eventTarget.addEventListener(type, listener, options);\n  };\n\n  const removeGlobalListener = (eventTarget: any, type: any, listener: any, options: any) => {\n    const fn = globalListeners.get(listener)?.fn || listener;\n    eventTarget.removeEventListener(type, fn, options);\n    globalListeners.delete(listener);\n  };\n\n  const removeAllGlobalListeners = () => {\n    globalListeners.forEach((value, key) => {\n      removeGlobalListener(value.eventTarget, value.type, key, value.options);\n    });\n  };\n\n  onCleanup(() => {\n    removeAllGlobalListeners();\n  });\n\n  return { addGlobalListener, removeGlobalListener, removeAllGlobalListeners };\n}\n","/*!\n * Portions of this file are based on code from ariakit.\n * MIT Licensed, Copyright (c) Diego Haz.\n *\n * Credits to the Ariakit team:\n * https://github.com/ariakit/ariakit/blob/232bc79018ec20967fec1e097a9474aba3bb5be7/packages/ariakit-utils/src/dom.ts\n */\n\n/**\n * Similar to `Element.prototype.contains`, but a little faster when `element` is the same as `child`.\n */\nexport function contains(parent: Node | undefined, child: Node | null) {\n  if (!parent) {\n    return false;\n  }\n\n  return parent === child || parent.contains(child);\n}\n\n/**\n * Returns `element.ownerDocument.activeElement`.\n */\nexport function getActiveElement(node?: Node | null, activeDescendant = false): HTMLElement | null {\n  const { activeElement } = getDocument(node);\n\n  if (!activeElement?.nodeName) {\n    // In IE11, activeElement might be an empty object if we're interacting\n    // with elements inside an iframe.\n    return null;\n  }\n\n  if (isFrame(activeElement) && activeElement.contentDocument) {\n    return getActiveElement(activeElement.contentDocument.body, activeDescendant);\n  }\n\n  if (activeDescendant) {\n    const id = activeElement.getAttribute(\"aria-activedescendant\");\n\n    if (id) {\n      const element = getDocument(activeElement).getElementById(id);\n\n      if (element) {\n        return element;\n      }\n    }\n  }\n\n  return activeElement as HTMLElement | null;\n}\n\n/**\n * Returns `element.ownerDocument.defaultView || window`.\n */\nexport function getWindow(node?: Node | null): Window {\n  return getDocument(node).defaultView || window;\n}\n\n/**\n * Returns `element.ownerDocument || document`.\n */\nexport function getDocument(node?: Node | null): Document {\n  return node ? node.ownerDocument || (node as Document) : document;\n}\n\n/**\n * Checks whether `element` is a frame element.\n */\nexport function isFrame(element: Element): element is HTMLIFrameElement {\n  return element.tagName === \"IFRAME\";\n}\n","export enum EventKey {\n  Escape = \"Escape\",\n  Enter = \"Enter\",\n  Tab = \"Tab\",\n  Space = \" \",\n  ArrowDown = \"ArrowDown\",\n  ArrowLeft = \"ArrowLeft\",\n  ArrowRight = \"ArrowRight\",\n  ArrowUp = \"ArrowUp\",\n  End = \"End\",\n  Home = \"Home\",\n  PageDown = \"PageDown\",\n  PageUp = \"PageUp\",\n}\n","/*!\n * Portions of this file are based on code from react-spectrum.\n * Apache License Version 2.0, Copyright 2020 Adobe.\n *\n * Credits to the React Spectrum team:\n * https://github.com/adobe/react-spectrum/blob/cf9ab24f3255be1530d0f584061a01aa1e8180e6/packages/@react-aria/utils/src/platform.ts\n */\n\nfunction testUserAgent(re: RegExp) {\n  if (typeof window === \"undefined\" || window.navigator == null) {\n    return false;\n  }\n  return (\n    // @ts-ignore\n    window.navigator[\"userAgentData\"]?.brands.some((brand: { brand: string; version: string }) =>\n      re.test(brand.brand)\n    ) || re.test(window.navigator.userAgent)\n  );\n}\n\nfunction testPlatform(re: RegExp) {\n  return typeof window !== \"undefined\" && window.navigator != null\n    ? // @ts-ignore\n      re.test(window.navigator[\"userAgentData\"]?.platform || window.navigator.platform)\n    : false;\n}\n\nexport function isMac() {\n  return testPlatform(/^Mac/i);\n}\n\nexport function isIPhone() {\n  return testPlatform(/^iPhone/i);\n}\n\nexport function isIPad() {\n  return (\n    testPlatform(/^iPad/i) ||\n    // iPadOS 13 lies and says it's a Mac, but we can distinguish by detecting touch support.\n    (isMac() && navigator.maxTouchPoints > 1)\n  );\n}\n\nexport function isIOS() {\n  return isIPhone() || isIPad();\n}\n\nexport function isAppleDevice() {\n  return isMac() || isIOS();\n}\n\nexport function isWebKit() {\n  return testUserAgent(/AppleWebKit/i) && !isChrome();\n}\n\nexport function isChrome() {\n  return testUserAgent(/Chrome/i);\n}\n\nexport function isAndroid() {\n  return testUserAgent(/Android/i);\n}\n","import { JSX } from \"solid-js\";\n\nimport { isFunction } from \"./assertion\";\nimport { isMac } from \"./platform\";\n\n/** Call a JSX.EventHandlerUnion with the event. */\nexport function callHandler<T, E extends Event>(\n  event: E & { currentTarget: T; target: Element },\n  handler: JSX.EventHandlerUnion<T, E> | undefined\n) {\n  if (handler) {\n    if (isFunction(handler)) {\n      handler(event);\n    } else {\n      handler[0](handler[1], event);\n    }\n  }\n\n  return event?.defaultPrevented;\n}\n\n/** Create a new event handler which calls all given handlers in the order they were chained with the same event. */\nexport function composeEventHandlers<T>(\n  handlers: Array<JSX.EventHandlerUnion<T, any> | undefined>\n) {\n  return (event: any) => {\n    for (const handler of handlers) {\n      callHandler(event, handler);\n    }\n  };\n}\n\nexport function isActionKey() {\n  const event = window.event as KeyboardEvent;\n  return event?.key === \"Enter\";\n}\n\nexport function isSelectionKey() {\n  const event = window.event as KeyboardEvent;\n  return event?.key === \" \" || event?.code === \"Space\";\n}\n\nexport function isCtrlKey(e: Pick<KeyboardEvent, \"ctrlKey\" | \"metaKey\">) {\n  if (isMac()) {\n    return e.metaKey && !e.ctrlKey;\n  }\n\n  return e.ctrlKey && !e.metaKey;\n}\n","/*!\n * Portions of this file are based on code from react-spectrum.\n * Apache License Version 2.0, Copyright 2020 Adobe.\n *\n * Credits to the React Spectrum team:\n * https://github.com/adobe/react-spectrum/blob/a9dea8a3672179e6c38aafd1429daf44c7ea2ff6/packages/@react-aria/utils/src/focusWithoutScrolling.ts\n */\n\n// This is a polyfill for element.focus({preventScroll: true});\n// Currently necessary for Safari and old Edge:\n// https://caniuse.com/#feat=mdn-api_htmlelement_focus_preventscroll_option\n// See https://bugs.webkit.org/show_bug.cgi?id=178583\n\n// Original licensing for the following methods can be found in the\n// NOTICE file in the root directory of this source tree.\n// See https://github.com/calvellido/focus-options-polyfill\n\ninterface ScrollableElement {\n  element: HTMLElement;\n  scrollTop: number;\n  scrollLeft: number;\n}\n\nexport function focusWithoutScrolling(element: HTMLElement | null | undefined) {\n  if (!element) {\n    return;\n  }\n\n  if (supportsPreventScroll()) {\n    element.focus({ preventScroll: true });\n  } else {\n    const scrollableElements = getScrollableElements(element);\n    element.focus();\n    restoreScrollPosition(scrollableElements);\n  }\n}\n\nlet supportsPreventScrollCached: boolean | null = null;\n\nfunction supportsPreventScroll() {\n  if (supportsPreventScrollCached == null) {\n    supportsPreventScrollCached = false;\n    try {\n      const focusElem = document.createElement(\"div\");\n      focusElem.focus({\n        get preventScroll() {\n          supportsPreventScrollCached = true;\n          return true;\n        },\n      });\n    } catch (e) {\n      // Ignore\n    }\n  }\n\n  return supportsPreventScrollCached;\n}\n\nfunction getScrollableElements(element: HTMLElement): ScrollableElement[] {\n  let parent = element.parentNode;\n  const scrollableElements: ScrollableElement[] = [];\n  const rootScrollingElement = document.scrollingElement || document.documentElement;\n\n  while (parent instanceof HTMLElement && parent !== rootScrollingElement) {\n    if (parent.offsetHeight < parent.scrollHeight || parent.offsetWidth < parent.scrollWidth) {\n      scrollableElements.push({\n        element: parent,\n        scrollTop: parent.scrollTop,\n        scrollLeft: parent.scrollLeft,\n      });\n    }\n    parent = parent.parentNode;\n  }\n\n  if (rootScrollingElement instanceof HTMLElement) {\n    scrollableElements.push({\n      element: rootScrollingElement,\n      scrollTop: rootScrollingElement.scrollTop,\n      scrollLeft: rootScrollingElement.scrollLeft,\n    });\n  }\n\n  return scrollableElements;\n}\n\nfunction restoreScrollPosition(scrollableElements: ScrollableElement[]) {\n  for (const { element, scrollTop, scrollLeft } of scrollableElements) {\n    element.scrollTop = scrollTop;\n    element.scrollLeft = scrollLeft;\n  }\n}\n","/*!\n * Portions of this file are based on code from react-spectrum.\n * Apache License Version 2.0, Copyright 2020 Adobe.\n *\n * Credits to the React Spectrum team:\n * https://github.com/adobe/react-spectrum/blob/a9dea8a3672179e6c38aafd1429daf44c7ea2ff6/packages/@react-aria/utils/src/getScrollParent.ts\n */\n\nexport function getScrollParent(node: Element | null): Element {\n  while (node && !isScrollable(node)) {\n    node = node.parentElement;\n  }\n\n  return node || document.scrollingElement || document.documentElement;\n}\n\nfunction isScrollable(node: Element): boolean {\n  const style = window.getComputedStyle(node);\n  return /(auto|scroll)/.test(style.overflow + style.overflowX + style.overflowY);\n}\n","/*!\n * Portions of this file are based on code from react-spectrum.\n * Apache License Version 2.0, Copyright 2020 Adobe.\n *\n * Credits to the React Spectrum team:\n * https://github.com/adobe/react-spectrum/blob/a9dea8a3672179e6c38aafd1429daf44c7ea2ff6/packages/@react-aria/utils/src/isVirtualEvent.ts\n */\n\n// Original licensing for the following method can be found in the\n// NOTICE file in the root directory of this source tree.\n// See https://github.com/facebook/react/blob/3c713d513195a53788b3f8bb4b70279d68b15bcc/packages/react-interactions/events/src/dom/shared/index.js#L74-L87\n\nimport { isAndroid } from \"./platform\";\n\n// Keyboards, Assistive Technologies, and element.click() all produce a \"virtual\"\n// click event. This is a method of inferring such clicks. Every browser except\n// IE 11 only sets a zero value of \"detail\" for click events that are \"virtual\".\n// However, IE 11 uses a zero value for all click events. For IE 11 we rely on\n// the quirk that it produces click events that are of type PointerEvent, and\n// where only the \"virtual\" click lacks a pointerType field.\n\nexport function isVirtualClick(event: MouseEvent | PointerEvent): boolean {\n  // JAWS/NVDA with Firefox.\n  if ((event as any).mozInputSource === 0 && event.isTrusted) {\n    return true;\n  }\n\n  // Android TalkBack's detail value varies depending on the event listener providing the event so we have specific logic here instead\n  // If pointerType is defined, event is from a click listener. For events from mousedown listener, detail === 0 is a sufficient check\n  // to detect TalkBack virtual clicks.\n  if (isAndroid() && (event as PointerEvent).pointerType) {\n    return event.type === \"click\" && event.buttons === 1;\n  }\n\n  return event.detail === 0 && !(event as PointerEvent).pointerType;\n}\n\nexport function isVirtualPointerEvent(event: PointerEvent) {\n  // If the pointer size is zero, then we assume it's from a screen reader.\n  // Android TalkBack double tap will sometimes return a event with width and height of 1\n  // and pointerType === 'mouse' so we need to check for a specific combination of event attributes.\n  // Cannot use \"event.pressure === 0\" as the sole check due to Safari pointer events always returning pressure === 0\n  // instead of .5, see https://bugs.webkit.org/show_bug.cgi?id=206216. event.pointerType === 'mouse' is to distingush\n  // Talkback double tap from Windows Firefox touch screen press\n  return (\n    (event.width === 0 && event.height === 0) ||\n    (event.width === 1 &&\n      event.height === 1 &&\n      event.pressure === 0 &&\n      event.detail === 0 &&\n      event.pointerType === \"mouse\")\n  );\n}\n","/** A function that does nothing. */\nexport function noop() {\n  return;\n}\n","/*!\n * Portions of this file are based on code from react-spectrum.\n * Apache License Version 2.0, Copyright 2020 Adobe.\n *\n * Credits to the React Spectrum team:\n * https://github.com/adobe/react-spectrum/blob/ff3e690fffc6c54367b8057e28a0e5b9211f37b5/packages/@react-stately/utils/src/number.ts\n */\n\n/**\n * Takes a value and forces it to the closest min/max if it's outside. Also forces it to the closest valid step.\n */\nexport function clamp(value: number, min = -Infinity, max = Infinity): number {\n  return Math.min(Math.max(value, min), max);\n}\n","/*!\n * Portions of this file are based on code from ariakit.\n * MIT Licensed, Copyright (c) Diego Haz.\n *\n * Credits to the Ariakit team:\n * https://github.com/ariakit/ariakit/blob/84e97943ad637a582c01c9b56d880cd95f595737/packages/ariakit/src/hovercard/__utils/polygon.ts\n * https://github.com/ariakit/ariakit/blob/f2a96973de523d67e41eec983263936c489ef3e2/packages/ariakit/src/hovercard/__utils/debug-polygon.ts\n */\n\nexport type Point = [number, number];\nexport type Polygon = Point[];\n\nexport function getEventPoint(event: MouseEvent): Point {\n  return [event.clientX, event.clientY];\n}\n\n// Based on https://github.com/metafloor/pointinpoly\nexport function isPointInPolygon(point: Point, polygon: Polygon) {\n  const [x, y] = point;\n  let inside = false;\n  const length = polygon.length;\n  for (let l = length, i = 0, j = l - 1; i < l; j = i++) {\n    const [xi, yi] = polygon[i] as Point;\n    const [xj, yj] = polygon[j] as Point;\n    const [, vy] = polygon[j === 0 ? l - 1 : j - 1] || [0, 0];\n    const where = (yi - yj) * (x - xi) - (xi - xj) * (y - yi);\n    if (yj < yi) {\n      if (y >= yj && y < yi) {\n        // point on the line\n        if (where === 0) return true;\n        if (where > 0) {\n          if (y === yj) {\n            // ray intersects vertex\n            if (y > vy) {\n              inside = !inside;\n            }\n          } else {\n            inside = !inside;\n          }\n        }\n      }\n    } else if (yi < yj) {\n      if (y > yi && y <= yj) {\n        // point on the line\n        if (where === 0) return true;\n        if (where < 0) {\n          if (y === yj) {\n            // ray intersects vertex\n            if (y < vy) {\n              inside = !inside;\n            }\n          } else {\n            inside = !inside;\n          }\n        }\n      }\n    } else if (y == yi && ((x >= xj && x <= xi) || (x >= xi && x <= xj))) {\n      // point on horizontal edge\n      return true;\n    }\n  }\n  return inside;\n}\n\n/* -------------------------------------------------------------------------------------------------\n * Debug polygon\n * -----------------------------------------------------------------------------------------------*/\n\nfunction getPolygon() {\n  const id = \"debug-polygon\";\n  const existingPolygon = document.getElementById(id);\n  if (existingPolygon) {\n    return existingPolygon;\n  }\n  const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  svg.style.top = \"0\";\n  svg.style.left = \"0\";\n  svg.style.width = \"100%\";\n  svg.style.height = \"100%\";\n  svg.style.fill = \"green\";\n  svg.style.opacity = \"0.2\";\n  svg.style.position = \"fixed\";\n  svg.style.pointerEvents = \"none\";\n  svg.style.zIndex = \"999999\";\n  const polygon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"polygon\");\n  polygon.setAttribute(\"id\", id);\n  polygon.setAttribute(\"points\", \"0,0 0,0\");\n  svg.appendChild(polygon);\n  document.body.appendChild(svg);\n  return polygon;\n}\n\nexport function debugPolygon(polygon: Polygon) {\n  const polygonElement = getPolygon();\n  const points = polygon.map(point => point.join(\",\")).join(\" \");\n  polygonElement.setAttribute(\"points\", points);\n  // Return SVG element\n  return polygonElement.parentElement;\n}\n","import { Component, ComponentProps, JSX } from \"solid-js\";\n\n/** All HTML and SVG elements. */\nexport type DOMElements = keyof JSX.IntrinsicElements;\n\n/** Any HTML element or SolidJS component. */\nexport type ElementType<Props = any> = DOMElements | Component<Props> | (string & {});\n\n/**\n * Allows for extending a set of props (`Source`) by an overriding set of props (`Override`),\n * ensuring that any duplicates are overridden by the overriding set of props.\n */\nexport type OverrideProps<Source = {}, Override = {}> = Omit<Source, keyof Override> & Override;\n\n/** The `as` prop type. */\nexport type As<Props = any> = ElementType<Props>;\n\n/** Props object that includes the `as` prop. */\nexport type PolymorphicProps<Type extends As = As, Props = {}> = OverrideProps<\n  ComponentProps<Type>,\n  Props & { as?: Type | As }\n>;\n\n/** A component with the `as` prop. */\nexport type PolymorphicComponent<DefaultType extends As, Props = {}> = {\n  <Type extends As>(props: PolymorphicProps<Type, Props> & { as: Type }): JSX.Element;\n  (props: PolymorphicProps<DefaultType, Props>): JSX.Element;\n};\n\n/**\n * Create a component with the type cast to `PolymorphicComponent`.\n * You have to use `Dynamic` internally and pass the `as` prop to handle polymorphism correctly.\n */\nexport function createPolymorphicComponent<DefaultType extends As, Props = {}>(\n  component: Component<PolymorphicProps<DefaultType, Props>>\n) {\n  return component as unknown as PolymorphicComponent<DefaultType, Props>;\n}\n","import { mergeProps } from \"solid-js\";\n\nexport function mergeDefaultProps<T extends Record<string, any>>(\n  defaultProps: Partial<T>,\n  props: T\n): T {\n  return mergeProps(defaultProps, props);\n}\n","/*!\n * Portions of this file are based on code from react-spectrum.\n * Apache License Version 2.0, Copyright 2020 Adobe.\n *\n * Credits to the React Spectrum team:\n * https://github.com/adobe/react-spectrum/blob/a9dea8a3672179e6c38aafd1429daf44c7ea2ff6/packages/@react-aria/utils/src/runAfterTransition.ts\n */\n\n// We store a global list of elements that are currently transitioning,\n// mapped to a set of CSS properties that are transitioning for that element.\n// This is necessary rather than a simple count of transitions because of browser\n// bugs, e.g. Chrome sometimes fires both transitionend and transitioncancel rather\n// than one or the other. So we need to track what's actually transitioning so that\n// we can ignore these duplicate events.\nconst transitionsByElement = new Map<EventTarget, Set<string>>();\n\n// A list of callbacks to call once there are no transitioning elements.\nconst transitionCallbacks = new Set<() => void>();\n\nfunction setupGlobalEvents() {\n  if (typeof window === \"undefined\") {\n    return;\n  }\n\n  const onTransitionStart = (e: TransitionEvent) => {\n    if (!e.target) {\n      return;\n    }\n\n    // Add the transitioning property to the list for this element.\n    let transitions = transitionsByElement.get(e.target);\n    if (!transitions) {\n      transitions = new Set();\n      transitionsByElement.set(e.target, transitions);\n\n      // The transitioncancel event must be registered on the element itself, rather than as a global\n      // event. This enables us to handle when the node is deleted from the document while it is transitioning.\n      // In that case, the cancel event would have nowhere to bubble to, so we need to handle it directly.\n      e.target.addEventListener(\"transitioncancel\", onTransitionEnd as EventListener);\n    }\n\n    transitions.add(e.propertyName);\n  };\n\n  const onTransitionEnd = (e: TransitionEvent) => {\n    if (!e.target) {\n      return;\n    }\n\n    // Remove property from list of transitioning properties.\n    const properties = transitionsByElement.get(e.target);\n    if (!properties) {\n      return;\n    }\n\n    properties.delete(e.propertyName);\n\n    // If empty, remove transitioncancel event, and remove the element from the list of transitioning elements.\n    if (properties.size === 0) {\n      e.target.removeEventListener(\"transitioncancel\", onTransitionEnd as EventListener);\n      transitionsByElement.delete(e.target);\n    }\n\n    // If no transitioning elements, call all the queued callbacks.\n    if (transitionsByElement.size === 0) {\n      for (const cb of transitionCallbacks) {\n        cb();\n      }\n\n      transitionCallbacks.clear();\n    }\n  };\n\n  document.body.addEventListener(\"transitionrun\", onTransitionStart);\n  document.body.addEventListener(\"transitionend\", onTransitionEnd);\n}\n\nif (typeof document !== \"undefined\") {\n  if (document.readyState !== \"loading\") {\n    setupGlobalEvents();\n  } else {\n    document.addEventListener(\"DOMContentLoaded\", setupGlobalEvents);\n  }\n}\n\nexport function runAfterTransition(fn: () => void) {\n  // Wait one frame to see if an animation starts, e.g. a transition on mount.\n  requestAnimationFrame(() => {\n    // If no transitions are running, call the function immediately.\n    // Otherwise, add it to a list of callbacks to run at the end of the animation.\n    if (transitionsByElement.size === 0) {\n      fn();\n    } else {\n      transitionCallbacks.add(fn);\n    }\n  });\n}\n","/*!\n * Portions of this file are based on code from react-spectrum.\n * Apache License Version 2.0, Copyright 2020 Adobe.\n *\n * Credits to the React Spectrum team:\n * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/utils/src/scrollIntoView.ts\n */\n\n/**\n * Scrolls `scrollView` so that `element` is visible.\n * Similar to `element.scrollIntoView({block: 'nearest'})` (not supported in Edge),\n * but doesn't affect parents above `scrollView`.\n */\nexport function scrollIntoView(scrollView: HTMLElement, element: HTMLElement) {\n  const offsetX = relativeOffset(scrollView, element, \"left\");\n  const offsetY = relativeOffset(scrollView, element, \"top\");\n  const width = element.offsetWidth;\n  const height = element.offsetHeight;\n  let x = scrollView.scrollLeft;\n  let y = scrollView.scrollTop;\n  const maxX = x + scrollView.offsetWidth;\n  const maxY = y + scrollView.offsetHeight;\n\n  if (offsetX <= x) {\n    x = offsetX;\n  } else if (offsetX + width > maxX) {\n    x += offsetX + width - maxX;\n  }\n  if (offsetY <= y) {\n    y = offsetY;\n  } else if (offsetY + height > maxY) {\n    y += offsetY + height - maxY;\n  }\n\n  scrollView.scrollLeft = x;\n  scrollView.scrollTop = y;\n}\n\n/**\n * Computes the offset left or top from child to ancestor by accumulating\n * offsetLeft or offsetTop through intervening offsetParents.\n */\nfunction relativeOffset(ancestor: HTMLElement, child: HTMLElement, axis: \"left\" | \"top\") {\n  const prop = axis === \"left\" ? \"offsetLeft\" : \"offsetTop\";\n  let sum = 0;\n  while (child.offsetParent) {\n    sum += child[prop];\n    if (child.offsetParent === ancestor) {\n      // Stop once we have found the ancestor we are interested in.\n      break;\n    } else if (child.offsetParent.contains(ancestor)) {\n      // If the ancestor is not `position:relative`, then we stop at\n      // _its_ offset parent, and we subtract off _its_ offset, so that\n      // we end up with the proper offset from child to ancestor.\n      sum -= ancestor[prop];\n      break;\n    }\n    child = child.offsetParent as HTMLElement;\n  }\n  return sum;\n}\n","import { JSX } from \"solid-js\";\n\nexport const visuallyHiddenStyles: JSX.CSSProperties = {\n  border: \"0\",\n  clip: \"rect(0 0 0 0)\",\n  \"clip-path\": \"inset(50%)\",\n  height: \"1px\",\n  margin: \"0 -1px -1px 0\",\n  overflow: \"hidden\",\n  padding: \"0\",\n  position: \"absolute\",\n  width: \"1px\",\n  \"white-space\": \"nowrap\",\n};\n","/*!\n * Portions of this file are based on code from ariakit.\n * MIT Licensed, Copyright (c) Diego Haz.\n *\n * Credits to the Ariakit team:\n * https://github.com/ariakit/ariakit/blob/main/packages/ariakit-utils/src/focus.ts\n *\n * Portions of this file are based on code from react-spectrum.\n * Apache License Version 2.0, Copyright 2020 Adobe.\n *\n * Credits to the React Spectrum team:\n * https://github.com/adobe/react-spectrum/blob/main/packages/%40react-aria/focus/src/isElementVisible.ts\n * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/focus/src/FocusScope.tsx\n */\n\nimport { contains, getActiveElement, isFrame } from \"./dom\";\n\nconst focusableElements = [\n  \"input:not([type='hidden']):not([disabled])\",\n  \"select:not([disabled])\",\n  \"textarea:not([disabled])\",\n  \"button:not([disabled])\",\n  \"a[href]\",\n  \"area[href]\",\n  \"[tabindex]\",\n  \"iframe\",\n  \"object\",\n  \"embed\",\n  \"audio[controls]\",\n  \"video[controls]\",\n  \"[contenteditable]:not([contenteditable='false'])\",\n];\n\nconst tabbableElements = [...focusableElements, '[tabindex]:not([tabindex=\"-1\"]):not([disabled])'];\n\nconst FOCUSABLE_ELEMENT_SELECTOR =\n  focusableElements.join(\":not([hidden]),\") + \",[tabindex]:not([disabled]):not([hidden])\";\n\nconst TABBABLE_ELEMENT_SELECTOR = tabbableElements.join(':not([hidden]):not([tabindex=\"-1\"]),');\n\n/**\n * Returns all the tabbable elements in `container`.\n */\nexport function getAllTabbableIn(container: HTMLElement, includeContainer?: boolean) {\n  const elements = Array.from(container.querySelectorAll<HTMLElement>(FOCUSABLE_ELEMENT_SELECTOR));\n\n  const tabbableElements = elements.filter(isTabbable);\n\n  if (includeContainer && isTabbable(container)) {\n    tabbableElements.unshift(container);\n  }\n\n  tabbableElements.forEach((element, i) => {\n    if (isFrame(element) && element.contentDocument) {\n      const frameBody = element.contentDocument.body;\n      const allFrameTabbable = getAllTabbableIn(frameBody, false);\n      tabbableElements.splice(i, 1, ...allFrameTabbable);\n    }\n  });\n\n  return tabbableElements;\n}\n\n/**\n * Checks whether `element` is tabbable or not.\n * @example\n * isTabbable(document.querySelector(\"input\")); // true\n * isTabbable(document.querySelector(\"input[tabindex='-1']\")); // false\n * isTabbable(document.querySelector(\"input[hidden]\")); // false\n * isTabbable(document.querySelector(\"input:disabled\")); // false\n */\nexport function isTabbable(element: Element): element is HTMLElement {\n  return isFocusable(element) && !hasNegativeTabIndex(element);\n}\n\n/**\n * Checks whether `element` is focusable or not.\n * @example\n * isFocusable(document.querySelector(\"input\")); // true\n * isFocusable(document.querySelector(\"input[tabindex='-1']\")); // true\n * isFocusable(document.querySelector(\"input[hidden]\")); // false\n * isFocusable(document.querySelector(\"input:disabled\")); // false\n */\nexport function isFocusable(element: Element): element is HTMLElement {\n  return element.matches(FOCUSABLE_ELEMENT_SELECTOR) && isElementVisible(element);\n}\n\nfunction hasNegativeTabIndex(element: Element) {\n  const tabIndex = parseInt(element.getAttribute(\"tabindex\") || \"0\", 10);\n  return tabIndex < 0;\n}\n\n/**\n * Adapted from https://github.com/testing-library/jest-dom and\n * https://github.com/vuejs/vue-test-utils-next/.\n * Licensed under the MIT License.\n * @param element - Element to evaluate for display or visibility.\n */\nexport function isElementVisible(element: Element, childElement?: Element): boolean {\n  return (\n    element.nodeName !== \"#comment\" &&\n    isStyleVisible(element) &&\n    isAttributeVisible(element, childElement) &&\n    (!element.parentElement || isElementVisible(element.parentElement, element))\n  );\n}\n\nfunction isStyleVisible(element: Element) {\n  if (!(element instanceof HTMLElement) && !(element instanceof SVGElement)) {\n    return false;\n  }\n\n  const { display, visibility } = element.style;\n\n  let isVisible = display !== \"none\" && visibility !== \"hidden\" && visibility !== \"collapse\";\n\n  if (isVisible) {\n    if (!element.ownerDocument.defaultView) {\n      return isVisible;\n    }\n\n    const { getComputedStyle } = element.ownerDocument.defaultView;\n    const { display: computedDisplay, visibility: computedVisibility } = getComputedStyle(element);\n\n    isVisible =\n      computedDisplay !== \"none\" &&\n      computedVisibility !== \"hidden\" &&\n      computedVisibility !== \"collapse\";\n  }\n\n  return isVisible;\n}\n\nfunction isAttributeVisible(element: Element, childElement?: Element) {\n  return (\n    !element.hasAttribute(\"hidden\") &&\n    (element.nodeName === \"DETAILS\" && childElement && childElement.nodeName !== \"SUMMARY\"\n      ? element.hasAttribute(\"open\")\n      : true)\n  );\n}\n\n/**\n * Checks if `element` has focus within.\n * Elements that are referenced by `aria-activedescendant` are also considered.\n * @example\n * hasFocusWithin(document.getElementById(\"id\"));\n */\nexport function hasFocusWithin(element: Node | Element) {\n  const activeElement = getActiveElement(element);\n\n  if (!activeElement) {\n    return false;\n  }\n\n  if (!contains(element, activeElement)) {\n    const activeDescendant = activeElement.getAttribute(\"aria-activedescendant\");\n    if (!activeDescendant) {\n      return false;\n    }\n    if (!(\"id\" in element)) {\n      return false;\n    }\n    if (activeDescendant === element.id) {\n      return true;\n    }\n    return !!element.querySelector(`#${CSS.escape(activeDescendant)}`);\n  } else {\n    return true;\n  }\n}\n\ninterface FocusManagerOptions {\n  /**\n   * The element to start searching from.\n   * The currently focused element by default.\n   */\n  from?: HTMLElement;\n\n  /** Whether to only include tabbable elements, or all focusable elements. */\n  tabbable?: boolean;\n\n  /** Whether focus should wrap around when it reaches the end of the scope. */\n  wrap?: boolean;\n}\n\nfunction isElementInScope(element: Element | null, scope: HTMLElement[]) {\n  return scope.some(node => node.contains(element));\n}\n\n/**\n * Create a [TreeWalker]{@link https://developer.mozilla.org/en-US/docs/Web/API/TreeWalker}\n * that matches all focusable/tabbable elements.\n */\nexport function getFocusableTreeWalker(\n  root: HTMLElement,\n  opts?: FocusManagerOptions,\n  scope?: HTMLElement[]\n) {\n  const selector = opts?.tabbable ? TABBABLE_ELEMENT_SELECTOR : FOCUSABLE_ELEMENT_SELECTOR;\n  const walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT, {\n    acceptNode(node) {\n      // Skip nodes inside the starting node.\n      if (opts?.from?.contains(node)) {\n        return NodeFilter.FILTER_REJECT;\n      }\n\n      if (\n        (node as HTMLElement).matches(selector) &&\n        isElementVisible(node as HTMLElement) &&\n        (!scope || isElementInScope(node as HTMLElement, scope))\n      ) {\n        return NodeFilter.FILTER_ACCEPT;\n      }\n\n      return NodeFilter.FILTER_SKIP;\n    },\n  });\n\n  if (opts?.from) {\n    walker.currentNode = opts.from;\n  }\n\n  return walker;\n}\n"],"names":["addItemToArray","array","item","index","slice","removeItemFromArray","updatedArray","indexOf","splice","isArray","value","Array","isString","Object","prototype","toString","call","isFunction","createGenerateId","baseId","suffix","createGlobalListeners","globalListeners","Map","addGlobalListener","eventTarget","type","listener","options","fn","once","args","delete","set","addEventListener","removeGlobalListener","get","removeEventListener","removeAllGlobalListeners","forEach","key","onCleanup","contains","parent","child","getActiveElement","node","activeDescendant","activeElement","getDocument","nodeName","isFrame","contentDocument","body","id","getAttribute","element","getElementById","getWindow","defaultView","window","ownerDocument","document","tagName","EventKey","testUserAgent","re","navigator","brands","some","brand","test","userAgent","testPlatform","platform","isMac","isIPhone","isIPad","maxTouchPoints","isIOS","isAppleDevice","isWebKit","isChrome","isAndroid","callHandler","event","handler","defaultPrevented","composeEventHandlers","handlers","isActionKey","isSelectionKey","code","isCtrlKey","e","metaKey","ctrlKey","focusWithoutScrolling","supportsPreventScroll","focus","preventScroll","scrollableElements","getScrollableElements","restoreScrollPosition","supportsPreventScrollCached","focusElem","createElement","parentNode","rootScrollingElement","scrollingElement","documentElement","HTMLElement","offsetHeight","scrollHeight","offsetWidth","scrollWidth","push","scrollTop","scrollLeft","getScrollParent","isScrollable","parentElement","style","getComputedStyle","overflow","overflowX","overflowY","isVirtualClick","mozInputSource","isTrusted","pointerType","buttons","detail","isVirtualPointerEvent","width","height","pressure","noop","clamp","min","Infinity","max","Math","getEventPoint","clientX","clientY","isPointInPolygon","point","polygon","x","y","inside","length","l","i","j","xi","yi","xj","yj","vy","where","getPolygon","existingPolygon","svg","createElementNS","top","left","fill","opacity","position","pointerEvents","zIndex","setAttribute","appendChild","debugPolygon","polygonElement","points","map","join","createPolymorphicComponent","component","mergeDefaultProps","defaultProps","props","mergeProps","transitionsByElement","transitionCallbacks","Set","setupGlobalEvents","onTransitionStart","target","transitions","onTransitionEnd","add","propertyName","properties","size","cb","clear","readyState","runAfterTransition","requestAnimationFrame","scrollIntoView","scrollView","offsetX","relativeOffset","offsetY","maxX","maxY","ancestor","axis","prop","sum","offsetParent","visuallyHiddenStyles","border","clip","margin","padding","focusableElements","tabbableElements","FOCUSABLE_ELEMENT_SELECTOR","TABBABLE_ELEMENT_SELECTOR","getAllTabbableIn","container","includeContainer","elements","from","querySelectorAll","filter","isTabbable","unshift","frameBody","allFrameTabbable","isFocusable","hasNegativeTabIndex","matches","isElementVisible","tabIndex","parseInt","childElement","isStyleVisible","isAttributeVisible","SVGElement","display","visibility","isVisible","computedDisplay","computedVisibility","hasAttribute","hasFocusWithin","querySelector","CSS","escape","isElementInScope","scope","getFocusableTreeWalker","root","opts","selector","tabbable","walker","createTreeWalker","NodeFilter","SHOW_ELEMENT","acceptNode","FILTER_REJECT","FILTER_ACCEPT","FILTER_SKIP","currentNode"],"mappings":"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"}